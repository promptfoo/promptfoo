{
  "$ref": "#/definitions/UnifiedConfig",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "ApiProvider": {
      "additionalProperties": false,
      "properties": {
        "callApi": {
          "additionalProperties": false,
          "properties": {
            "label": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "callClassificationApi": {
          "$comment": "(prompt: string) => Promise<ProviderClassificationResponse>",
          "properties": {
            "namedArgs": {
              "additionalProperties": false,
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "required": ["prompt"],
              "type": "object"
            }
          },
          "type": "object"
        },
        "callEmbeddingApi": {
          "$comment": "(prompt: string) => Promise<ProviderEmbeddingResponse>",
          "properties": {
            "namedArgs": {
              "additionalProperties": false,
              "properties": {
                "prompt": {
                  "type": "string"
                }
              },
              "required": ["prompt"],
              "type": "object"
            }
          },
          "type": "object"
        },
        "delay": {
          "type": "number"
        },
        "id": {
          "$comment": "() => string"
        },
        "label": {
          "$ref": "#/definitions/ProviderLabel"
        },
        "transform": {
          "type": "string"
        }
      },
      "required": ["id", "callApi"],
      "type": "object"
    },
    "Assertion": {
      "additionalProperties": false,
      "properties": {
        "metric": {
          "type": "string"
        },
        "provider": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            },
            {
              "$ref": "#/definitions/ProviderTypeMap"
            }
          ]
        },
        "rubricPrompt": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ]
        },
        "threshold": {
          "type": "number"
        },
        "transform": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/AssertionType"
        },
        "value": {
          "$ref": "#/definitions/AssertionValue"
        },
        "weight": {
          "type": "number"
        }
      },
      "required": ["type"],
      "type": "object"
    },
    "AssertionSet": {
      "additionalProperties": false,
      "properties": {
        "assert": {
          "items": {
            "$ref": "#/definitions/Assertion"
          },
          "type": "array"
        },
        "metric": {
          "type": "string"
        },
        "threshold": {
          "type": "number"
        },
        "type": {
          "const": "assert-set",
          "type": "string"
        },
        "weight": {
          "type": "number"
        }
      },
      "required": ["type", "assert"],
      "type": "object"
    },
    "AssertionType": {
      "enum": [
        "human",
        "equals",
        "contains",
        "icontains",
        "contains-all",
        "contains-any",
        "icontains-all",
        "icontains-any",
        "starts-with",
        "regex",
        "is-json",
        "is-sql",
        "contains-json",
        "contains-sql",
        "javascript",
        "python",
        "similar",
        "answer-relevance",
        "context-faithfulness",
        "context-recall",
        "context-relevance",
        "llm-rubric",
        "model-graded-closedqa",
        "factuality",
        "model-graded-factuality",
        "webhook",
        "rouge-n",
        "rouge-s",
        "rouge-l",
        "levenshtein",
        "is-valid-openai-function-call",
        "is-valid-openai-tools-call",
        "latency",
        "perplexity",
        "perplexity-score",
        "cost",
        "select-best",
        "moderation",
        "not-human",
        "not-equals",
        "not-contains",
        "not-icontains",
        "not-contains-all",
        "not-contains-any",
        "not-icontains-all",
        "not-icontains-any",
        "not-starts-with",
        "not-regex",
        "not-is-json",
        "not-is-sql",
        "not-contains-json",
        "not-contains-sql",
        "not-javascript",
        "not-python",
        "not-similar",
        "not-answer-relevance",
        "not-context-faithfulness",
        "not-context-recall",
        "not-context-relevance",
        "not-llm-rubric",
        "not-model-graded-closedqa",
        "not-factuality",
        "not-model-graded-factuality",
        "not-webhook",
        "not-rouge-n",
        "not-rouge-s",
        "not-rouge-l",
        "not-levenshtein",
        "not-is-valid-openai-function-call",
        "not-is-valid-openai-tools-call",
        "not-latency",
        "not-perplexity",
        "not-perplexity-score",
        "not-cost",
        "not-select-best",
        "not-moderation"
      ],
      "type": "string"
    },
    "AssertionValue": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "object"
        },
        {
          "$ref": "#/definitions/AssertionValueFunction"
        }
      ]
    },
    "AssertionValueFunction": {
      "$comment": "(\n  output: string,\n  context: AssertionValueFunctionContext) => AssertionValueFunctionResult | Promise<AssertionValueFunctionResult>",
      "properties": {
        "namedArgs": {
          "additionalProperties": false,
          "properties": {
            "context": {
              "$ref": "#/definitions/AssertionValueFunctionContext"
            },
            "output": {
              "type": "string"
            }
          },
          "required": ["output", "context"],
          "type": "object"
        }
      },
      "type": "object"
    },
    "AssertionValueFunctionContext": {
      "additionalProperties": false,
      "properties": {
        "prompt": {
          "type": "string"
        },
        "test": {
          "$ref": "#/definitions/AtomicTestCase%3Calias-1210021082-73341-73467-1210021082-0-215038%3Cstring%2C(string%7Cobject-src_types.ts-12480-12487-src_types.ts-12471-12487-src_types.ts-12457-12488-src_types.ts-12441-12489-src_types.ts-12433-12490-src_types.ts-12312-12492-src_types.ts-0-18966)%3E%3E"
        },
        "vars": {
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object"
              }
            ]
          },
          "type": "object"
        }
      },
      "required": ["vars", "test"],
      "type": "object"
    },
    "AtomicTestCase": {
      "additionalProperties": false,
      "properties": {
        "assert": {
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/AssertionSet"
              },
              {
                "$ref": "#/definitions/Assertion"
              }
            ]
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "options": {
          "additionalProperties": false,
          "properties": {
            "disableConversationVar": {
              "type": "boolean"
            },
            "disableVarExpansion": {
              "type": "boolean"
            },
            "factuality": {
              "additionalProperties": false,
              "properties": {
                "agree": {
                  "type": "number"
                },
                "differButFactual": {
                  "type": "number"
                },
                "disagree": {
                  "type": "number"
                },
                "subset": {
                  "type": "number"
                },
                "superset": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "postprocess": {
              "deprecated": "in > 0.38.0. Use `transform` instead.",
              "type": "string"
            },
            "prefix": {
              "type": "string"
            },
            "provider": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "$ref": "#/definitions/ProviderOptions"
                },
                {
                  "$ref": "#/definitions/ApiProvider"
                },
                {
                  "$ref": "#/definitions/ProviderTypeMap"
                }
              ]
            },
            "rubricPrompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              ]
            },
            "storeOutputAs": {
              "type": "string"
            },
            "suffix": {
              "type": "string"
            },
            "transform": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "provider": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "providerOutput": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ]
        },
        "threshold": {
          "type": "number"
        },
        "vars": {
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object"
              }
            ]
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "AtomicTestCase<alias-1210021082-73341-73467-1210021082-0-215038<string,(string|object-src_types.ts-12480-12487-src_types.ts-12471-12487-src_types.ts-12457-12488-src_types.ts-12441-12489-src_types.ts-12433-12490-src_types.ts-12312-12492-src_types.ts-0-18966)>>": {
      "additionalProperties": false,
      "properties": {
        "assert": {
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/AssertionSet"
              },
              {
                "$ref": "#/definitions/Assertion"
              }
            ]
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "options": {
          "additionalProperties": false,
          "properties": {
            "disableConversationVar": {
              "type": "boolean"
            },
            "disableVarExpansion": {
              "type": "boolean"
            },
            "factuality": {
              "additionalProperties": false,
              "properties": {
                "agree": {
                  "type": "number"
                },
                "differButFactual": {
                  "type": "number"
                },
                "disagree": {
                  "type": "number"
                },
                "subset": {
                  "type": "number"
                },
                "superset": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "postprocess": {
              "deprecated": "in > 0.38.0. Use `transform` instead.",
              "type": "string"
            },
            "prefix": {
              "type": "string"
            },
            "provider": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "$ref": "#/definitions/ProviderOptions"
                },
                {
                  "$ref": "#/definitions/ApiProvider"
                },
                {
                  "$ref": "#/definitions/ProviderTypeMap"
                }
              ]
            },
            "rubricPrompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              ]
            },
            "storeOutputAs": {
              "type": "string"
            },
            "suffix": {
              "type": "string"
            },
            "transform": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "provider": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "providerOutput": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ]
        },
        "threshold": {
          "type": "number"
        },
        "vars": {
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object"
              }
            ]
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "DerivedMetric": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$comment": "(scores: Record<string, number>, context: RunEvalOptions) => number",
              "properties": {
                "namedArgs": {
                  "additionalProperties": false,
                  "properties": {
                    "context": {
                      "$ref": "#/definitions/RunEvalOptions"
                    },
                    "scores": {
                      "additionalProperties": {
                        "type": "number"
                      },
                      "type": "object"
                    }
                  },
                  "required": ["scores", "context"],
                  "type": "object"
                }
              },
              "type": "object"
            }
          ]
        }
      },
      "required": ["name", "value"],
      "type": "object"
    },
    "EnvOverrides": {
      "additionalProperties": false,
      "properties": {
        "ANTHROPIC_API_KEY": {
          "type": "string"
        },
        "AWS_BEDROCK_REGION": {
          "type": "string"
        },
        "AZURE_OPENAI_API_BASE_URL": {
          "type": "string"
        },
        "AZURE_OPENAI_API_HOST": {
          "type": "string"
        },
        "AZURE_OPENAI_API_KEY": {
          "type": "string"
        },
        "AZURE_OPENAI_BASE_URL": {
          "type": "string"
        },
        "BAM_API_HOST": {
          "type": "string"
        },
        "BAM_API_KEY": {
          "type": "string"
        },
        "CLOUDFLARE_ACCOUNT_ID": {
          "type": "string"
        },
        "CLOUDFLARE_API_KEY": {
          "type": "string"
        },
        "COHERE_API_KEY": {
          "type": "string"
        },
        "GOOGLE_API_HOST": {
          "type": "string"
        },
        "GOOGLE_API_KEY": {
          "type": "string"
        },
        "LOCALAI_BASE_URL": {
          "type": "string"
        },
        "MISTRAL_API_BASE_URL": {
          "type": "string"
        },
        "MISTRAL_API_HOST": {
          "type": "string"
        },
        "MISTRAL_API_KEY": {
          "type": "string"
        },
        "OPENAI_API_BASE_URL": {
          "type": "string"
        },
        "OPENAI_API_HOST": {
          "type": "string"
        },
        "OPENAI_API_KEY": {
          "type": "string"
        },
        "OPENAI_BASE_URL": {
          "type": "string"
        },
        "OPENAI_ORGANIZATION": {
          "type": "string"
        },
        "PALM_API_HOST": {
          "type": "string"
        },
        "PALM_API_KEY": {
          "type": "string"
        },
        "REPLICATE_API_KEY": {
          "type": "string"
        },
        "REPLICATE_API_TOKEN": {
          "type": "string"
        },
        "VERTEX_API_HOST": {
          "type": "string"
        },
        "VERTEX_API_KEY": {
          "type": "string"
        },
        "VERTEX_PROJECT_ID": {
          "type": "string"
        },
        "VERTEX_PUBLISHER": {
          "type": "string"
        },
        "VERTEX_REGION": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "EvaluateOptions": {
      "additionalProperties": false,
      "properties": {
        "cache": {
          "type": "boolean"
        },
        "delay": {
          "type": "number"
        },
        "eventSource": {
          "type": "string"
        },
        "generateSuggestions": {
          "type": "boolean"
        },
        "interactiveProviders": {
          "type": "boolean"
        },
        "maxConcurrency": {
          "type": "number"
        },
        "progressCallback": {
          "$comment": "(\n    progress: number,\n    total: number,\n    index: number,\n    evalStep: RunEvalOptions) => void",
          "properties": {
            "namedArgs": {
              "additionalProperties": false,
              "properties": {
                "evalStep": {
                  "$ref": "#/definitions/RunEvalOptions"
                },
                "index": {
                  "type": "number"
                },
                "progress": {
                  "type": "number"
                },
                "total": {
                  "type": "number"
                }
              },
              "required": ["progress", "total", "index", "evalStep"],
              "type": "object"
            }
          },
          "type": "object"
        },
        "repeat": {
          "type": "number"
        },
        "showProgressBar": {
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "FilePath": {
      "type": "string"
    },
    "NunjucksFilterMap": {
      "additionalProperties": {
        "$comment": "(...args: any[]) => string",
        "properties": {
          "namedArgs": {
            "additionalProperties": false,
            "properties": {
              "args": {
                "items": {},
                "type": "array"
              }
            },
            "required": ["args"],
            "type": "object"
          }
        },
        "type": "object"
      },
      "type": "object"
    },
    "Prompt": {
      "additionalProperties": false,
      "properties": {
        "display": {
          "deprecated": "in > 0.59.0. Use `label` instead.",
          "type": "string"
        },
        "function": {
          "$comment": "(context: {\n    vars: Record<string, string | object>;\n    provider?: ApiProvider;\n  }) => Promise<string | object>",
          "properties": {
            "namedArgs": {
              "additionalProperties": false,
              "properties": {
                "context": {
                  "additionalProperties": false,
                  "properties": {
                    "provider": {
                      "$ref": "#/definitions/ApiProvider"
                    },
                    "vars": {
                      "additionalProperties": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object"
                          }
                        ]
                      },
                      "type": "object"
                    }
                  },
                  "required": ["vars"],
                  "type": "object"
                }
              },
              "required": ["context"],
              "type": "object"
            }
          },
          "type": "object"
        },
        "id": {
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "raw": {
          "type": "string"
        }
      },
      "required": ["raw", "label"],
      "type": "object"
    },
    "ProviderFunction": {
      "additionalProperties": false,
      "properties": {
        "label": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "ProviderId": {
      "type": "string"
    },
    "ProviderLabel": {
      "type": "string"
    },
    "ProviderOptions": {
      "additionalProperties": false,
      "properties": {
        "config": {},
        "delay": {
          "type": "number"
        },
        "env": {
          "$ref": "#/definitions/EnvOverrides"
        },
        "id": {
          "$ref": "#/definitions/ProviderId"
        },
        "label": {
          "$ref": "#/definitions/ProviderLabel"
        },
        "prompts": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "transform": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "ProviderOptionsMap": {
      "additionalProperties": {
        "$ref": "#/definitions/ProviderOptions"
      },
      "type": "object"
    },
    "ProviderTypeMap": {
      "additionalProperties": false,
      "properties": {
        "classification": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "embedding": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "moderation": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "text": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        }
      },
      "type": "object"
    },
    "RunEvalOptions": {
      "additionalProperties": false,
      "properties": {
        "colIndex": {
          "type": "number"
        },
        "delay": {
          "type": "number"
        },
        "evaluateOptions": {
          "$ref": "#/definitions/EvaluateOptions"
        },
        "nunjucksFilters": {
          "$ref": "#/definitions/NunjucksFilterMap"
        },
        "prompt": {
          "$ref": "#/definitions/Prompt"
        },
        "provider": {
          "$ref": "#/definitions/ApiProvider"
        },
        "repeatIndex": {
          "type": "number"
        },
        "rowIndex": {
          "type": "number"
        },
        "test": {
          "$ref": "#/definitions/AtomicTestCase"
        }
      },
      "required": [
        "provider",
        "prompt",
        "delay",
        "test",
        "evaluateOptions",
        "rowIndex",
        "colIndex",
        "repeatIndex"
      ],
      "type": "object"
    },
    "Scenario": {
      "additionalProperties": false,
      "properties": {
        "config": {
          "items": {
            "additionalProperties": false,
            "properties": {
              "assert": {
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/AssertionSet"
                    },
                    {
                      "$ref": "#/definitions/Assertion"
                    }
                  ]
                },
                "type": "array"
              },
              "description": {
                "type": "string"
              },
              "options": {
                "additionalProperties": false,
                "properties": {
                  "disableConversationVar": {
                    "type": "boolean"
                  },
                  "disableVarExpansion": {
                    "type": "boolean"
                  },
                  "factuality": {
                    "additionalProperties": false,
                    "properties": {
                      "agree": {
                        "type": "number"
                      },
                      "differButFactual": {
                        "type": "number"
                      },
                      "disagree": {
                        "type": "number"
                      },
                      "subset": {
                        "type": "number"
                      },
                      "superset": {
                        "type": "number"
                      }
                    },
                    "type": "object"
                  },
                  "postprocess": {
                    "deprecated": "in > 0.38.0. Use `transform` instead.",
                    "type": "string"
                  },
                  "prefix": {
                    "type": "string"
                  },
                  "provider": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "$ref": "#/definitions/ProviderOptions"
                      },
                      {
                        "$ref": "#/definitions/ApiProvider"
                      },
                      {
                        "$ref": "#/definitions/ProviderTypeMap"
                      }
                    ]
                  },
                  "rubricPrompt": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "items": {
                          "type": "string"
                        },
                        "type": "array"
                      }
                    ]
                  },
                  "storeOutputAs": {
                    "type": "string"
                  },
                  "suffix": {
                    "type": "string"
                  },
                  "transform": {
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "provider": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "$ref": "#/definitions/ProviderOptions"
                  },
                  {
                    "$ref": "#/definitions/ApiProvider"
                  }
                ]
              },
              "providerOutput": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "threshold": {
                "type": "number"
              },
              "vars": {
                "additionalProperties": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    {
                      "type": "object"
                    }
                  ]
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "tests": {
          "items": {
            "$ref": "#/definitions/TestCase"
          },
          "type": "array"
        }
      },
      "required": ["config", "tests"],
      "type": "object"
    },
    "TestCase": {
      "additionalProperties": false,
      "properties": {
        "assert": {
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/AssertionSet"
              },
              {
                "$ref": "#/definitions/Assertion"
              }
            ]
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "options": {
          "additionalProperties": false,
          "properties": {
            "disableConversationVar": {
              "type": "boolean"
            },
            "disableVarExpansion": {
              "type": "boolean"
            },
            "factuality": {
              "additionalProperties": false,
              "properties": {
                "agree": {
                  "type": "number"
                },
                "differButFactual": {
                  "type": "number"
                },
                "disagree": {
                  "type": "number"
                },
                "subset": {
                  "type": "number"
                },
                "superset": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "postprocess": {
              "deprecated": "in > 0.38.0. Use `transform` instead.",
              "type": "string"
            },
            "prefix": {
              "type": "string"
            },
            "provider": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "$ref": "#/definitions/ProviderOptions"
                },
                {
                  "$ref": "#/definitions/ApiProvider"
                },
                {
                  "$ref": "#/definitions/ProviderTypeMap"
                }
              ]
            },
            "rubricPrompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              ]
            },
            "storeOutputAs": {
              "type": "string"
            },
            "suffix": {
              "type": "string"
            },
            "transform": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "provider": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/ProviderOptions"
            },
            {
              "$ref": "#/definitions/ApiProvider"
            }
          ]
        },
        "providerOutput": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ]
        },
        "threshold": {
          "type": "number"
        },
        "vars": {
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "object"
              }
            ]
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "UnifiedConfig": {
      "additionalProperties": false,
      "properties": {
        "commandLineOptions": {
          "additionalProperties": false,
          "properties": {
            "assertions": {
              "$ref": "#/definitions/FilePath"
            },
            "cache": {
              "type": "boolean"
            },
            "config": {
              "items": {
                "$ref": "#/definitions/FilePath"
              },
              "type": "array"
            },
            "delay": {
              "type": "string"
            },
            "envFile": {
              "$ref": "#/definitions/FilePath"
            },
            "filterFailing": {
              "type": "string"
            },
            "filterFirstN": {
              "type": "string"
            },
            "filterPattern": {
              "type": "string"
            },
            "filterProviders": {
              "type": "string"
            },
            "generateSuggestions": {
              "type": "boolean"
            },
            "grader": {
              "type": "string"
            },
            "interactiveProviders": {
              "type": "boolean"
            },
            "maxConcurrency": {
              "type": "string"
            },
            "modelOutputs": {
              "$ref": "#/definitions/FilePath"
            },
            "output": {
              "items": {
                "$ref": "#/definitions/FilePath"
              },
              "type": "array"
            },
            "progressBar": {
              "type": "boolean"
            },
            "promptPrefix": {
              "type": "string"
            },
            "promptSuffix": {
              "type": "string"
            },
            "prompts": {
              "items": {
                "$ref": "#/definitions/FilePath"
              },
              "type": "array"
            },
            "providers": {
              "items": {
                "$ref": "#/definitions/FilePath"
              },
              "type": "array"
            },
            "repeat": {
              "type": "string"
            },
            "share": {
              "type": "boolean"
            },
            "table": {
              "type": "boolean"
            },
            "tableCellMaxLength": {
              "type": "string"
            },
            "tests": {
              "$ref": "#/definitions/FilePath"
            },
            "var": {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            "vars": {
              "$ref": "#/definitions/FilePath"
            },
            "verbose": {
              "type": "boolean"
            },
            "watch": {
              "type": "boolean"
            },
            "write": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "defaultTest": {
          "additionalProperties": false,
          "properties": {
            "assert": {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/AssertionSet"
                  },
                  {
                    "$ref": "#/definitions/Assertion"
                  }
                ]
              },
              "type": "array"
            },
            "options": {
              "additionalProperties": false,
              "properties": {
                "disableConversationVar": {
                  "type": "boolean"
                },
                "disableVarExpansion": {
                  "type": "boolean"
                },
                "factuality": {
                  "additionalProperties": false,
                  "properties": {
                    "agree": {
                      "type": "number"
                    },
                    "differButFactual": {
                      "type": "number"
                    },
                    "disagree": {
                      "type": "number"
                    },
                    "subset": {
                      "type": "number"
                    },
                    "superset": {
                      "type": "number"
                    }
                  },
                  "type": "object"
                },
                "postprocess": {
                  "deprecated": "in > 0.38.0. Use `transform` instead.",
                  "type": "string"
                },
                "prefix": {
                  "type": "string"
                },
                "provider": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/definitions/ProviderOptions"
                    },
                    {
                      "$ref": "#/definitions/ApiProvider"
                    },
                    {
                      "$ref": "#/definitions/ProviderTypeMap"
                    }
                  ]
                },
                "rubricPrompt": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  ]
                },
                "storeOutputAs": {
                  "type": "string"
                },
                "suffix": {
                  "type": "string"
                },
                "transform": {
                  "type": "string"
                }
              },
              "type": "object"
            },
            "provider": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "$ref": "#/definitions/ProviderOptions"
                },
                {
                  "$ref": "#/definitions/ApiProvider"
                }
              ]
            },
            "providerOutput": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object"
                }
              ]
            },
            "threshold": {
              "type": "number"
            },
            "vars": {
              "additionalProperties": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "derivedMetrics": {
          "items": {
            "$ref": "#/definitions/DerivedMetric"
          },
          "type": "array"
        },
        "description": {
          "type": "string"
        },
        "env": {
          "$ref": "#/definitions/EnvOverrides"
        },
        "evaluateOptions": {
          "$ref": "#/definitions/EvaluateOptions"
        },
        "metadata": {
          "type": "object"
        },
        "nunjucksFilters": {
          "additionalProperties": {
            "$ref": "#/definitions/FilePath"
          },
          "type": "object"
        },
        "outputPath": {
          "anyOf": [
            {
              "$ref": "#/definitions/FilePath"
            },
            {
              "items": {
                "$ref": "#/definitions/FilePath"
              },
              "type": "array"
            }
          ]
        },
        "prompts": {
          "anyOf": [
            {
              "$ref": "#/definitions/FilePath"
            },
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/FilePath"
                  },
                  {
                    "$ref": "#/definitions/Prompt"
                  }
                ]
              },
              "type": "array"
            },
            {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            }
          ]
        },
        "providers": {
          "anyOf": [
            {
              "$ref": "#/definitions/ProviderId"
            },
            {
              "$ref": "#/definitions/ProviderFunction"
            },
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/ProviderId"
                  },
                  {
                    "$ref": "#/definitions/ProviderOptionsMap"
                  },
                  {
                    "$ref": "#/definitions/ProviderOptions"
                  },
                  {
                    "$ref": "#/definitions/ProviderFunction"
                  }
                ]
              },
              "type": "array"
            }
          ]
        },
        "scenarios": {
          "items": {
            "$ref": "#/definitions/Scenario"
          },
          "type": "array"
        },
        "sharing": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "additionalProperties": false,
              "properties": {
                "apiBaseUrl": {
                  "type": "string"
                },
                "appBaseUrl": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          ]
        },
        "tests": {
          "anyOf": [
            {
              "$ref": "#/definitions/FilePath"
            },
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/FilePath"
                  },
                  {
                    "$ref": "#/definitions/TestCase"
                  }
                ]
              },
              "type": "array"
            }
          ]
        }
      },
      "required": ["commandLineOptions", "evaluateOptions", "prompts", "providers", "tests"],
      "type": "object"
    }
  }
}
