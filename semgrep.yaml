# Semgrep Configuration
# See: https://semgrep.dev/docs/writing-rules/rule-syntax
#
# Run with: semgrep scan --config semgrep.yaml
#
# This config combines multiple rulesets for comprehensive coverage:
# - auto: Semgrep's curated security rules (includes typescript, react, nodejs, express)
# - p/r2c-best-practices: Code quality and correctness (for src/ only, skip examples)
# - p/github-actions: CI/CD security
#
# Rulesets evaluated but excluded:
# - p/gitleaks: Too many false positives (placeholder text, public keys)
# - p/trailofbits: False positives on intentional security test payloads
# - p/secrets: Redundant with auto config

rules: []

# =============================================================================
# RULE EXCLUSIONS
# These rules generate too many false positives for this codebase
# =============================================================================

# Note: Rule exclusions are done via command line or inline comments:
#   - Command line: --exclude-rule <rule-id>
#   - Inline: // nosemgrep: <rule-id>
#
# The rules below are documented for reference but exclusions should be
# applied selectively, not globally.

# -----------------------------------------------------------------------------
# FALSE POSITIVES - Path Traversal (javascript.lang.security.audit.path-traversal.*)
# -----------------------------------------------------------------------------
# These trigger on any path.join/path.resolve usage. In this codebase:
# - Most paths are constructed from config files, not user input
# - Server routes do validate/sanitize paths before use
# - The CLI tool inherently needs to access filesystem paths
#
# RECOMMENDATION: Review individually, suppress with inline comments where safe
# EXCEPTIONS: src/server/routes/* should be carefully reviewed

# -----------------------------------------------------------------------------
# FALSE POSITIVES - Non-literal RegExp (detect-non-literal-regexp)
# -----------------------------------------------------------------------------
# Triggers on: new RegExp(variable)
# In this codebase, dynamic regexes are used for:
# - Language/locale matching (controlled strings)
# - User-defined test patterns (sandboxed evaluation)
# - Config-driven matching (trusted input)
#
# RECOMMENDATION: Review for actual user input; most are safe

# -----------------------------------------------------------------------------
# LOW VALUE - Generic API Key Detection
# -----------------------------------------------------------------------------
# The Algolia search key (site/docusaurus.config.ts) is intentionally public.
# Public API keys for search services are safe to commit.

# -----------------------------------------------------------------------------
# EXPECTED IN EXAMPLES - Insecure patterns
# -----------------------------------------------------------------------------
# Examples intentionally demonstrate both secure and insecure patterns.
# The .semgrepignore file excludes these directories.
