description: 'Performance test: Persistent vs Traditional Python Providers'

prompts:
  - 'Calculate 2+2'
  - 'What is the capital of France?'
  - 'Explain quantum computing'
  - 'Generate a haiku about coding'
  - 'Summarize machine learning'

providers:
  # Persistent mode (default)
  - id: 'file://test_performance_example.py'
    label: 'Python (Persistent Mode)'
    config:
      basePath: '.'

  # Traditional mode (for comparison)
  - id: 'file://test_performance_example.py'
    label: 'Python (Traditional Mode)'
    config:
      basePath: '.'
      persistent: false

tests:
  - description: 'Performance test with multiple calls'
    vars: {}
    assert:
      - type: javascript
        value: 'output && output.response && output.call_number'
      - type: javascript
        value: 'output.processing_time_ms < 5000' # Should complete within 5 seconds
      - type: javascript
        value: 'typeof output.persistent_state === "boolean"'
