# Test configuration for auditing persistent Python providers
# Tests basic functionality and correctness

providers:
  - id: 'file:///Users/mdangelo/projects/pf3/test-scripts/basic_test.py:call_api'
    label: python-basic-persistent
    config:
      persistent: true
      persistentIdleTimeout: 900000 # 15 minutes for testing
      maxRestarts: 2

  - id: 'file:///Users/mdangelo/projects/pf3/test-scripts/basic_test.py:call_api'
    label: python-basic-traditional
    config:
      persistent: false

prompts:
  - 'What is 2 + 2?'
  - 'Generate a random number between 1 and 100'
  - 'Return the current timestamp'
  - 'Calculate fibonacci(10)'
  - "Process this text: 'Hello World'"

tests:
  - vars:
      prompt: 'What is 2 + 2?'
    assert:
      - type: contains
        value: '4'
      - type: not-contains
        value: 'error'

  - vars:
      prompt: 'Calculate fibonacci(10)'
    assert:
      - type: contains
        value: '55'
      - type: not-contains
        value: 'error'

  - vars:
      prompt: "Process this text: 'Hello World'"
    assert:
      - type: contains
        value: 'Hello World'
      - type: not-contains
        value: 'error'

defaultTest:
  assert:
    - type: not-contains
      value: 'error'
    - type: latency
      threshold: 10000 # 10 second timeout
