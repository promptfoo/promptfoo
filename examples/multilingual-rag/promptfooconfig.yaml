# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: 'Multi-lingual RAG Evaluation - Testing RAG metrics across languages'

# Main RAG prompt template
prompts:
  - |
    You are a multilingual assistant with access to a knowledge base. Answer the following question based on the provided context.
    
    Question: {{query}}
    
    Context:
    {{context}}
    
    Provide a comprehensive answer in the same language as the question.

providers:
  # Test with different models to compare multilingual capabilities
  - openai:gpt-4o-mini
  - openai:gpt-4o
  - anthropic:messages:claude-3-5-haiku-20241022

# Default assertions for all tests
defaultTest:
  assert:
    # Core RAG metrics
    - type: context-faithfulness
      threshold: 0.8
    - type: context-relevance
      threshold: 0.3
    - type: answer-relevance
      threshold: 0.8

tests:
  # English test cases
  - vars:
      query: "What are the main benefits of renewable energy?"
      context: |
        Renewable energy sources, such as solar, wind, and hydroelectric power, offer numerous benefits. 
        They produce little to no greenhouse gas emissions, helping combat climate change. 
        Renewable energy reduces dependence on fossil fuels, enhancing energy security. 
        These sources are inexhaustible on a human timescale, unlike coal, oil, and natural gas. 
        Additionally, renewable energy industries create jobs and can stimulate economic growth.
    assert:
      - type: factuality
        value: "Renewable energy reduces greenhouse gas emissions and combats climate change"
      - type: context-recall
        value: "Renewable energy creates jobs, reduces fossil fuel dependence, and is inexhaustible"
        threshold: 0.8

  # Spanish test cases
  - vars:
      query: "¿Cuáles son los principales beneficios de la energía renovable?"
      context: |
        Las fuentes de energía renovable, como la solar, eólica e hidroeléctrica, ofrecen numerosos beneficios.
        Producen pocas o ninguna emisión de gases de efecto invernadero, ayudando a combatir el cambio climático.
        La energía renovable reduce la dependencia de los combustibles fósiles, mejorando la seguridad energética.
        Estas fuentes son inagotables a escala humana, a diferencia del carbón, petróleo y gas natural.
        Además, las industrias de energía renovable crean empleos y pueden estimular el crecimiento económico.
    assert:
      - type: factuality
        value: "La energía renovable reduce las emisiones de gases de efecto invernadero y combate el cambio climático"
      - type: context-recall
        value: "La energía renovable crea empleos, reduce la dependencia de combustibles fósiles y es inagotable"
        threshold: 0.8

  # French test cases
  - vars:
      query: "Quels sont les principaux avantages de l'énergie renouvelable?"
      context: |
        Les sources d'énergie renouvelable, telles que le solaire, l'éolien et l'hydroélectrique, offrent de nombreux avantages.
        Elles produisent peu ou pas d'émissions de gaz à effet de serre, aidant à lutter contre le changement climatique.
        L'énergie renouvelable réduit la dépendance aux combustibles fossiles, améliorant la sécurité énergétique.
        Ces sources sont inépuisables à l'échelle humaine, contrairement au charbon, au pétrole et au gaz naturel.
        De plus, les industries de l'énergie renouvelable créent des emplois et peuvent stimuler la croissance économique.
    assert:
      - type: factuality
        value: "L'énergie renouvelable réduit les émissions de gaz à effet de serre et lutte contre le changement climatique"
      - type: context-recall
        value: "L'énergie renouvelable crée des emplois, réduit la dépendance aux combustibles fossiles et est inépuisable"
        threshold: 0.8

  # German test cases
  - vars:
      query: "Was sind die Hauptvorteile erneuerbarer Energien?"
      context: |
        Erneuerbare Energiequellen wie Solar-, Wind- und Wasserkraft bieten zahlreiche Vorteile.
        Sie produzieren wenig bis keine Treibhausgasemissionen und helfen, den Klimawandel zu bekämpfen.
        Erneuerbare Energien verringern die Abhängigkeit von fossilen Brennstoffen und verbessern die Energiesicherheit.
        Diese Quellen sind auf menschlicher Zeitskala unerschöpflich, im Gegensatz zu Kohle, Öl und Erdgas.
        Zudem schaffen die Industrien für erneuerbare Energien Arbeitsplätze und können das Wirtschaftswachstum fördern.
    assert:
      - type: factuality
        value: "Erneuerbare Energien reduzieren Treibhausgasemissionen und bekämpfen den Klimawandel"
      - type: context-recall
        value: "Erneuerbare Energien schaffen Arbeitsplätze, reduzieren die Abhängigkeit von fossilen Brennstoffen und sind unerschöpflich"
        threshold: 0.8

  # Japanese test cases
  - vars:
      query: "再生可能エネルギーの主な利点は何ですか？"
      context: |
        太陽光、風力、水力などの再生可能エネルギー源には多くの利点があります。
        温室効果ガスの排出がほとんどなく、気候変動対策に役立ちます。
        再生可能エネルギーは化石燃料への依存を減らし、エネルギー安全保障を向上させます。
        これらのエネルギー源は、石炭、石油、天然ガスとは異なり、人間の時間スケールでは枯渇しません。
        さらに、再生可能エネルギー産業は雇用を創出し、経済成長を促進する可能性があります。
    assert:
      - type: factuality
        value: "再生可能エネルギーは温室効果ガスの排出を削減し、気候変動と戦う"
      - type: context-recall
        value: "再生可能エネルギーは雇用を創出し、化石燃料への依存を減らし、枯渇しない"
        threshold: 0.8

  # Chinese (Simplified) test cases
  - vars:
      query: "可再生能源的主要好处是什么？"
      context: |
        太阳能、风能和水电等可再生能源提供了许多好处。
        它们几乎不产生温室气体排放，有助于应对气候变化。
        可再生能源减少了对化石燃料的依赖，增强了能源安全。
        与煤炭、石油和天然气不同，这些能源在人类时间尺度上是取之不尽的。
        此外，可再生能源产业创造就业机会，可以刺激经济增长。
    assert:
      - type: factuality
        value: "可再生能源减少温室气体排放并应对气候变化"
      - type: context-recall
        value: "可再生能源创造就业，减少对化石燃料的依赖，取之不尽"
        threshold: 0.8

  # Arabic test cases
  - vars:
      query: "ما هي الفوائد الرئيسية للطاقة المتجددة؟"
      context: |
        توفر مصادر الطاقة المتجددة، مثل الطاقة الشمسية وطاقة الرياح والطاقة الكهرومائية، فوائد عديدة.
        إنها تنتج القليل من انبعاثات غازات الدفيئة أو لا تنتج أي انبعاثات، مما يساعد في مكافحة تغير المناخ.
        الطاقة المتجددة تقلل الاعتماد على الوقود الأحفوري، مما يعزز أمن الطاقة.
        هذه المصادر لا تنضب على المقياس الزمني البشري، على عكس الفحم والنفط والغاز الطبيعي.
        بالإضافة إلى ذلك، تخلق صناعات الطاقة المتجددة فرص عمل ويمكن أن تحفز النمو الاقتصادي.
    assert:
      - type: factuality
        value: "الطاقة المتجددة تقلل انبعاثات غازات الدفيئة وتكافح تغير المناخ"
      - type: context-recall
        value: "الطاقة المتجددة تخلق فرص عمل، تقلل الاعتماد على الوقود الأحفوري، ولا تنضب"
        threshold: 0.8

  # Korean test cases
  - vars:
      query: "재생 가능 에너지의 주요 이점은 무엇입니까?"
      context: |
        태양광, 풍력, 수력과 같은 재생 가능 에너지원은 많은 이점을 제공합니다.
        온실가스 배출이 거의 없어 기후 변화에 대처하는 데 도움이 됩니다.
        재생 가능 에너지는 화석 연료에 대한 의존도를 줄여 에너지 안보를 향상시킵니다.
        이러한 에너지원은 석탄, 석유, 천연가스와 달리 인간의 시간 척도에서 고갈되지 않습니다.
        또한 재생 가능 에너지 산업은 일자리를 창출하고 경제 성장을 촉진할 수 있습니다.
    assert:
      - type: factuality
        value: "재생 가능 에너지는 온실가스 배출을 줄이고 기후 변화와 싸운다"
      - type: context-recall
        value: "재생 가능 에너지는 일자리를 창출하고, 화석 연료 의존도를 줄이며, 고갈되지 않는다"
        threshold: 0.8

  # Portuguese test cases
  - vars:
      query: "Quais são os principais benefícios da energia renovável?"
      context: |
        As fontes de energia renovável, como solar, eólica e hidrelétrica, oferecem numerosos benefícios.
        Elas produzem pouca ou nenhuma emissão de gases de efeito estufa, ajudando a combater as mudanças climáticas.
        A energia renovável reduz a dependência de combustíveis fósseis, melhorando a segurança energética.
        Essas fontes são inesgotáveis na escala de tempo humana, ao contrário do carvão, petróleo e gás natural.
        Além disso, as indústrias de energia renovável criam empregos e podem estimular o crescimento econômico.
    assert:
      - type: factuality
        value: "A energia renovável reduz as emissões de gases de efeito estufa e combate as mudanças climáticas"
      - type: context-recall
        value: "A energia renovável cria empregos, reduz a dependência de combustíveis fósseis e é inesgotável"
        threshold: 0.8

  # Hindi test cases  
  - vars:
      query: "नवीकरणीय ऊर्जा के मुख्य लाभ क्या हैं?"
      context: |
        सौर, पवन और जलविद्युत जैसे नवीकरणीय ऊर्जा स्रोत कई लाभ प्रदान करते हैं।
        वे बहुत कम या कोई ग्रीनहाउस गैस उत्सर्जन नहीं करते, जो जलवायु परिवर्तन से लड़ने में मदद करता है।
        नवीकरणीय ऊर्जा जीवाश्म ईंधन पर निर्भरता कम करती है, ऊर्जा सुरक्षा बढ़ाती है।
        ये स्रोत मानव समय पैमाने पर अक्षय हैं, कोयला, तेल और प्राकृतिक गैस के विपरीत।
        इसके अतिरिक्त, नवीकरणीय ऊर्जा उद्योग रोजगार सृजित करते हैं और आर्थिक विकास को प्रोत्साहित कर सकते हैं।
    assert:
      - type: factuality
        value: "नवीकरणीय ऊर्जा ग्रीनहाउस गैस उत्सर्जन कम करती है और जलवायु परिवर्तन से लड़ती है"
      - type: context-recall
        value: "नवीकरणीय ऊर्जा रोजगार सृजित करती है, जीवाश्म ईंधन पर निर्भरता कम करती है, और अक्षय है"
        threshold: 0.8

  # Cross-lingual test: Query in one language, context in another
  - vars:
      query: "What are the benefits of renewable energy?" # English query
      context: | # Spanish context
        Las fuentes de energía renovable ofrecen numerosos beneficios.
        Producen pocas emisiones de gases de efecto invernadero.
        Reducen la dependencia de combustibles fósiles.
        Son inagotables a escala humana.
        Crean empleos y estimulan el crecimiento económico.
    assert:
      - type: answer-relevance
        threshold: 0.7
      - type: context-faithfulness
        threshold: 0.7

  # Test with mixed-language context
  - vars:
      query: "What are the global benefits of renewable energy?"
      context: |
        Renewable energy offers global benefits. 可再生能源减少温室气体排放。
        Les énergies renouvelables créent des emplois dans le monde entier.
        再生可能エネルギーはエネルギー安全保障を向上させます。
        La energía renovable es inagotable a escala humana.
    assert:
      - type: context-faithfulness
        threshold: 0.6
      - type: answer-relevance
        threshold: 0.7
