# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: Assistant message prefilling

prompts:
  - |
    [
      {
        "role": "user",
        "content": "{{task}}"
      },
      {
        "role": "assistant",
        "content": "{{prefill}}"
      }
    ]

providers:
  - id: groq:llama-3.3-70b-versatile
    config:
      temperature: 0.7
      max_completion_tokens: 500
      stop: '```'

tests:
  - description: Prefill for concise code
    vars:
      task: Write a Python function to calculate the factorial of a number.
      prefill: '```python'
    assert:
      - type: javascript
        value: output.includes('def ') && output.includes('factorial')
      - type: javascript
        value: output.length > 20

  - description: Prefill for JSON output
    vars:
      task: |
        Extract the title, author, published date, and description from the following book as a JSON object:

        "The Great Gatsby" is a novel by F. Scott Fitzgerald, published in 1925, which takes place during the Jazz Age on Long Island.
      prefill: '```json'
    assert:
      - type: javascript
        value: output.includes('"title"') && output.includes('"author"')
      - type: javascript
        value: output.includes('The Great Gatsby') && output.includes('F. Scott Fitzgerald')
