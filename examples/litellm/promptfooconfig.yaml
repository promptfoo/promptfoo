# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: LiteLLM chat and embedding evaluation

prompts:
  - 'Translate the following text to {{language}}: "{{text}}"'

providers:
  # Chat models via LiteLLM
  - id: litellm:gpt-4.1-mini
    label: GPT-4.1 Mini
    config:
      apiBaseUrl: http://localhost:4000

  - id: litellm:claude-3.7-sonnet
    label: Claude 3.7 Sonnet
    config:
      apiBaseUrl: http://localhost:4000

# Configure embedding provider for similarity checks
defaultTest:
  options:
    provider:
      embedding:
        id: litellm:embedding:text-embedding-3-large
        config:
          apiBaseUrl: http://localhost:4000

tests:
  - vars:
      language: French
      text: "Hello, how are you today?"
    assert:
      - type: contains-any
        value: ["Bonjour", "Salut"]
      - type: similar
        threshold: 0.8
        value: "Bonjour, comment allez-vous aujourd'hui?"

  - vars:
      language: Spanish
      text: "The weather is beautiful"
    assert:
      - type: contains-any
        value: ["hermoso", "bonito", "bello"]
      - type: llm-rubric
        value: "The translation should be grammatically correct Spanish and preserve the meaning"
