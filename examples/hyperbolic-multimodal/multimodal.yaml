# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: Hyperbolic multimodal vision-language

prompts:
  - |
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "{{question}}"
        },
        {
          "type": "image_url",
          "image_url": {
            "url": "{{image_url}}"
          }
        }
      ]
    }

providers:
  - id: hyperbolic:qwen/Qwen2.5-VL-72B-Instruct
    label: Qwen VL 72B
    config:
      temperature: 0.1
      max_tokens: 1024

  - id: hyperbolic:mistralai/Pixtral-12B
    label: Pixtral 12B
    config:
      temperature: 0.1
      max_tokens: 1024

tests:
  # Image analysis
  - vars:
      question: 'What do you see in this image? Describe the main subject and what they are doing.'
      image_url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Grosser_Panda.JPG/1280px-Grosser_Panda.JPG'
    assert:
      - type: contains-any
        value: ['panda', 'bear', 'bamboo', 'eating']
      - type: llm-rubric
        value: 'The response accurately describes the panda in the image'

  - vars:
      question: 'What landmark is shown in this image? Describe the scene including time of day and weather.'
      image_url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Eiffel_Tower_from_Seine.jpg/800px-Eiffel_Tower_from_Seine.jpg'
    assert:
      - type: contains
        value: 'Eiffel Tower'
      - type: llm-rubric
        value: 'The response correctly identifies the Eiffel Tower and describes the scene'

  # Chart/diagram understanding
  - vars:
      question: 'What programming concept is illustrated in this diagram? List the main categories shown.'
      image_url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Python_3._The_standard_type_hierarchy.png/800px-Python_3._The_standard_type_hierarchy.png'
    assert:
      - type: contains-any
        value: ['Python', 'type', 'hierarchy', 'class']
      - type: llm-rubric
        value: "The response correctly identifies this as Python's type hierarchy"

  # Text extraction
  - vars:
      question: 'What text is visible in this image? What does the sign mean?'
      image_url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Stop_sign_MUTCD.svg/800px-Stop_sign_MUTCD.svg.png'
    assert:
      - type: contains
        value: 'STOP'
      - type: llm-rubric
        value: 'The response correctly reads the STOP sign text and explains its meaning'
