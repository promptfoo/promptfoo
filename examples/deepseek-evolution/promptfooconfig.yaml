# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json

description: Tracking censorship across 5 DeepSeek reasoning models

prompts:
  - '{{prompt}}'

providers:
  # ================================================================
  # DeepSeek R1 - Original (January 2025)
  # Baseline model from original censorship study
  # ================================================================
  - id: 'openrouter:deepseek/deepseek-r1'
    label: 'R1 (Jan 2025)'
    config:
      temperature: 0  # Deterministic for comparison
      max_tokens: 10240  # Allow long reasoning traces
      passthrough:
        include_reasoning: true  # Request reasoning tokens from API

  # ================================================================
  # DeepSeek R1-0528 - Enhanced (May 2025)
  # Improved reasoning capabilities
  # ================================================================
  - id: 'openrouter:deepseek/deepseek-r1-0528'
    label: 'R1-0528 (May 2025)'
    config:
      temperature: 0
      max_tokens: 10240  # Allow long reasoning traces
      passthrough:
        include_reasoning: true

  # ================================================================
  # DeepSeek V3.1 - Hybrid Architecture (August 2025)
  # First model with configurable reasoning mode
  # ================================================================
  - id: 'openrouter:deepseek/deepseek-chat-v3.1'
    label: 'V3.1 (Aug 2025)'
    config:
      temperature: 0
      max_tokens: 10240  # Allow long reasoning traces
      reasoning_enabled: true  # Enable reasoning mode

  # ================================================================
  # DeepSeek V3.1 Terminus - Refined (September 2025)
  # Language consistency and agent improvements
  # ================================================================
  - id: 'openrouter:deepseek/deepseek-v3.1-terminus'
    label: 'V3.1-Terminus (Sep 2025)'
    config:
      temperature: 0
      max_tokens: 10240  # Allow long reasoning traces
      reasoning_enabled: true

  # ================================================================
  # DeepSeek V3.2 Exp - Sparse Attention (September 2025)
  # Uses DeepSeek Sparse Attention (DSA) architecture
  # Generates fewer reasoning tokens than previous versions
  # ================================================================
  - id: 'openrouter:deepseek/deepseek-v3.2-exp'
    label: 'V3.2-Exp (Sep 2025)'
    config:
      temperature: 0
      max_tokens: 10240  # Allow long reasoning traces
      reasoning_enabled: true

defaultTest:
  assert:
    - type: javascript
      value: file://detect-censorship.js

tests: huggingface://datasets/promptfoo/CCP-sensitive-prompts?split=train

outputPath: ./output/results.json

metadata:
  study: 'DeepSeek Censorship Evolution'
  date: '2025-11-12'
  models_tested: 5
  dataset_size: 1360
  topics_covered: 7
  methodology: 'Multi-method censorship detection with reasoning trace analysis'
  original_study: 'https://www.promptfoo.dev/blog/deepseek-censorship/'
  original_dataset: 'https://huggingface.co/datasets/promptfoo/CCP-sensitive-prompts'
