# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: '🎨 Comprehensive Fun Test Suite for Gemini 2.5 Flash Image'

prompts:
  # Basic creative prompts
  - 'Generate an image of {{subject}}'
  - 'Create a {{style}} artwork featuring {{subject}}'
  - 'Design {{subject}} in the style of {{artist}}'
  - 'Show {{character}} {{action}} in {{setting}}'

providers:
  # Test Google AI Studio
  - id: google:gemini-2.5-flash-image-preview
    label: 'AI Studio 🚀'
    config:
      generationConfig:
        temperature: 0.8
        maxOutputTokens: 1024
        responseModalities:
          - IMAGE
          - TEXT

tests:
  # 🎭 Creative Character Tests
  - description: '🦄 Magical unicorn in cyberpunk city'
    vars:
      subject: 'a rainbow unicorn with LED mane galloping through neon-lit streets'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05
      - type: javascript
        value: |
          const hasImage = output.includes('![Generated Image]');
          const hasBase64 = output.includes('data:image') && output.includes('base64,');
          return hasImage && hasBase64;

  - description: '🚀 Space cat astronaut adventure'
    vars:
      subject: 'a fluffy orange cat in a space suit floating among colorful nebulae'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  - description: '🎨 Van Gogh style robot'
    vars:
      style: 'Van Gogh swirly impressionist'
      subject: 'a friendly robot gardening flowers'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  # 🏰 Fantasy Adventure Series
  - description: '🐉 Dragon vs knight epic battle'
    vars:
      character: 'a brave knight in shining armor'
      action: 'battling a majestic fire-breathing dragon'
      setting: 'a medieval castle courtyard at sunset'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: "🧙‍♂️ Wizard's magical library"
    vars:
      subject: "a wizard's enchanted library with floating books and glowing crystals"
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # 🌮 Fun Food Adventures
  - description: '🌮 Taco truck in space'
    vars:
      subject: 'a colorful taco truck floating in space serving aliens'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: '🍕 Pizza surfing competition'
    vars:
      subject: 'anthropomorphic pizza slices surfing on cheese waves'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # 🎪 Whimsical Scenarios
  - description: '🎈 Hot air balloon city'
    vars:
      artist: 'Studio Ghibli'
      subject: 'a city made entirely of hot air balloons floating in cloudy skies'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: '🦋 Butterfly mechanical garden'
    vars:
      style: 'steampunk mechanical'
      subject: 'robot butterflies pollinating mechanical flowers in a brass garden'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # 🎯 Technical Quality Tests
  - description: '🎪 Detailed circus scene test'
    vars:
      subject: 'a vibrant three-ring circus with acrobats, lions, and colorful tents under spotlight'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: llm-rubric
        value: |
          Evaluate this generated circus image on a scale of 1-10 based on:

          **Visual Complexity (40%)**
          - Multiple circus elements (acrobats, lions, tents)
          - Three-ring circus layout
          - Rich detail and vibrant colors
          - Professional spotlight lighting

          **Artistic Quality (30%)**
          - Composition and visual balance
          - Color harmony and vibrancy
          - Professional illustration quality
          - Clarity and sharpness

          **Prompt Adherence (30%)**
          - Contains circus performers (acrobats)
          - Shows lions or circus animals
          - Features colorful circus tents
          - Includes spotlight/dramatic lighting

          Score 8+ for excellent circus scenes with rich detail and multiple elements.
        provider: google:gemini-2.5-flash
      - type: cost
        threshold: 0.05

  # 🎨 Enhanced Artistic Quality Assessment
  - description: '🎭 Professional artistic evaluation - Van Gogh style robot'
    vars:
      style: 'Van Gogh swirly impressionist'
      subject: 'a friendly robot gardening flowers'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: llm-rubric
        value: |
          As a professional art critic, evaluate this Van Gogh style robot image comprehensively:

          **Artistic Style Adherence (35%)**
          - Characteristic swirling brushstrokes of Van Gogh
          - Post-impressionist color palette and technique
          - Expressive, emotional quality typical of Van Gogh
          - Proper interpretation of the impressionist style

          **Composition & Design (25%)**
          - Visual balance and focal points
          - Use of space and proportion
          - Dynamic composition that draws the eye
          - Integration of robot and garden elements

          **Technical Execution (20%)**
          - Quality of brushwork simulation
          - Color harmony and contrast
          - Lighting and shadow work
          - Overall image clarity and definition

          **Creative Interpretation (20%)**
          - Originality in combining robot with Van Gogh style
          - Meaningful integration of gardening theme
          - Emotional resonance and artistic impact
          - Innovation within the style constraints

          **Scoring Guidelines:**
          - 9-10: Masterful execution worthy of gallery display
          - 7-8: Excellent artistic quality with minor improvements possible
          - 5-6: Good attempt with notable artistic merit
          - 3-4: Adequate but lacks artistic sophistication
          - 1-2: Poor execution, does not capture Van Gogh style

          Provide detailed feedback on strengths and areas for improvement.
        provider: google:gemini-2.5-flash
      - type: cost
        threshold: 0.05
