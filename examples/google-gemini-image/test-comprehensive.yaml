# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: 'ğŸ¨ Comprehensive Fun Test Suite for Gemini 2.5 Flash Image'

prompts:
  # Basic creative prompts
  - 'Generate an image of {{subject}}'
  - 'Create a {{style}} artwork featuring {{subject}}'
  - 'Design {{subject}} in the style of {{artist}}'
  - 'Show {{character}} {{action}} in {{setting}}'

providers:
  # Test Google AI Studio
  - id: google:gemini-2.5-flash-image-preview
    label: 'AI Studio ğŸš€'
    config:
      generationConfig:
        temperature: 0.8
        maxOutputTokens: 1024
        responseModalities:
          - IMAGE
          - TEXT

tests:
  # ğŸ­ Creative Character Tests
  - description: 'ğŸ¦„ Magical unicorn in cyberpunk city'
    vars:
      subject: 'a rainbow unicorn with LED mane galloping through neon-lit streets'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05
      - type: javascript
        value: |
          const hasImage = output.includes('![Generated Image]');
          const hasBase64 = output.includes('data:image') && output.includes('base64,');
          return hasImage && hasBase64;

  - description: 'ğŸš€ Space cat astronaut adventure'
    vars:
      subject: 'a fluffy orange cat in a space suit floating among colorful nebulae'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  - description: 'ğŸ¨ Van Gogh style robot'
    vars:
      style: 'Van Gogh swirly impressionist'
      subject: 'a friendly robot gardening flowers'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  # ğŸ° Fantasy Adventure Series
  - description: 'ğŸ‰ Dragon vs knight epic battle'
    vars:
      character: 'a brave knight in shining armor'
      action: 'battling a majestic fire-breathing dragon'
      setting: 'a medieval castle courtyard at sunset'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: "ğŸ§™â€â™‚ï¸ Wizard's magical library"
    vars:
      subject: "a wizard's enchanted library with floating books and glowing crystals"
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # ğŸŒ® Fun Food Adventures
  - description: 'ğŸŒ® Taco truck in space'
    vars:
      subject: 'a colorful taco truck floating in space serving aliens'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: 'ğŸ• Pizza surfing competition'
    vars:
      subject: 'anthropomorphic pizza slices surfing on cheese waves'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # ğŸª Whimsical Scenarios
  - description: 'ğŸˆ Hot air balloon city'
    vars:
      artist: 'Studio Ghibli'
      subject: 'a city made entirely of hot air balloons floating in cloudy skies'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05

  - description: 'ğŸ¦‹ Butterfly mechanical garden'
    vars:
      style: 'steampunk mechanical'
      subject: 'robot butterflies pollinating mechanical flowers in a brass garden'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05

  # ğŸ¯ Technical Quality Tests
  - description: 'ğŸª Detailed circus scene test'
    vars:
      subject: 'a vibrant three-ring circus with acrobats, lions, and colorful tents under spotlight'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: javascript
        value: |
          // Validate image format
          const imageMatch = output.match(/!\[Generated Image\]\(data:image\/([^;]+);base64,([^)]+)\)/);
          return imageMatch !== null;
      - type: cost
        threshold: 0.05
