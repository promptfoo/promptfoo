# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: 'üéØ Gemini Self-Evaluation: Generate + Grade Business Images'

prompts:
  - 'Generate a professional {{image_type}} for {{business_context}}'

providers:
  # Generator: Gemini 2.5 Flash Image
  - id: google:gemini-2.5-flash-image-preview
    label: 'Gemini Image Generator üé®'
    config:
      generationConfig:
        temperature: 0.7
        maxOutputTokens: 1024
        responseModalities:
          - IMAGE
          - TEXT

tests:
  # üè¢ E-commerce Product Photography
  - description: 'üì± E-commerce: Professional Product Shot'
    vars:
      image_type: 'product photograph'
      business_context: 'wireless earbuds on clean white background, commercial photography style'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05
      - type: llm-rubric
        value: |
          You are a professional e-commerce photography reviewer. Grade this product image on a scale of 1-10 for commercial use.

          **TECHNICAL QUALITY (Weight: 30%)**
          - Lighting: Professional, even lighting without harsh shadows
          - Focus: Product is sharp and clearly defined
          - Composition: Well-framed with appropriate negative space
          - Resolution: Appears high-quality and suitable for zoom

          **COMMERCIAL VIABILITY (Weight: 40%)**
          - Background: Clean, distraction-free background
          - Product visibility: All key features clearly visible
          - Professional appearance: Looks like competitor product photos
          - Trust factor: Would customers trust this product based on the image?

          **BRAND SAFETY (Weight: 30%)**
          - Appropriate for all audiences
          - No distracting or inappropriate elements
          - Suitable for major e-commerce platforms
          - Maintains professional standards

          **SCORING:**
          - 9-10: Excellent, ready for immediate commercial use
          - 7-8: Good, minor improvements needed
          - 5-6: Average, significant improvements required
          - 3-4: Poor, major issues present
          - 1-2: Unusable for commercial purposes

          Provide your overall score and brief reasoning.
        provider: google:gemini-2.5-flash

  # üé® Marketing Campaign Creative
  - description: 'üöÄ Marketing: SaaS Product Hero Image'
    vars:
      image_type: 'hero image'
      business_context: 'modern office worker using productivity software, clean and professional, conveying efficiency and success'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05
      - type: llm-rubric
        value: |
          You are a marketing creative director reviewing this hero image for a SaaS product website. Rate this image 1-10.

          **EMOTIONAL IMPACT (Weight: 35%)**
          - Does it convey productivity and success?
          - Would it motivate potential customers to learn more?
          - Does it create positive associations with the product?
          - Is the mood appropriate for business software?

          **VISUAL EFFECTIVENESS (Weight: 35%)**
          - Clean, modern aesthetic suitable for tech industry
          - Good use of color and composition
          - Professional appearance that builds trust
          - Scalable for different web placements

          **BRAND ALIGNMENT (Weight: 30%)**
          - Represents target audience (business professionals)
          - Conveys efficiency and modern workflow
          - Differentiates from generic stock photography
          - Suitable for B2B marketing context

          **QUALITY GATES:**
          - Score 8+: Approve for campaign use
          - Score 6-7: Request revisions
          - Score 5-: Reject, start over

          Provide score and specific feedback on strengths/weaknesses.
        provider: google:gemini-2.5-flash

  # üë• Corporate Communications
  - description: 'ü§ù Corporate: Team Collaboration Visual'
    vars:
      image_type: 'corporate illustration'
      business_context: 'diverse business team collaborating in modern office, professional but approachable, conveying teamwork and innovation'
    assert:
      - type: contains
        value: '![Generated Image]'
      - type: cost
        threshold: 0.05
      - type: llm-rubric
        value: |
          You are a corporate communications manager evaluating this image for company materials. Grade 1-10.

          **DIVERSITY & INCLUSION (Weight: 40%)**
          - Represents diverse workforce appropriately
          - No bias or stereotyping present
          - Inclusive and welcoming appearance
          - Suitable for global corporate communications

          **PROFESSIONAL STANDARDS (Weight: 35%)**
          - Appropriate for annual reports, presentations
          - Maintains corporate dignity and professionalism
          - High enough quality for print and digital use
          - Aligns with modern business practices

          **MESSAGE EFFECTIVENESS (Weight: 25%)**
          - Clearly conveys collaboration and teamwork
          - Shows innovation and forward-thinking culture
          - Appeals to both employees and external stakeholders
          - Differentiates company as modern and progressive

          **COMPLIANCE CHECK:**
          - Safe for HR and legal review
          - Appropriate for all corporate contexts
          - No potential PR risks identified

          Provide score and assessment of suitability for corporate use.
        provider: google:gemini-2.5-flash

  # üìä Quality Consistency Test
  - description: 'üîÑ Consistency: Multiple Business Card Designs'
    vars:
      image_type: 'business card design'
      business_context: 'minimalist professional business card with geometric elements, clean typography, corporate blue and white color scheme'
    assert:
      - type: contains
        value: 'data:image'
      - type: cost
        threshold: 0.05
      - type: llm-rubric
        value: |
          You are a graphic design quality controller. Evaluate this business card design for production readiness (1-10).

          **DESIGN FUNDAMENTALS (Weight: 40%)**
          - Typography: Readable, professional fonts
          - Layout: Proper spacing and hierarchy
          - Color scheme: Professional and print-appropriate
          - Visual balance: Well-composed and aesthetically pleasing

          **PRODUCTION VIABILITY (Weight: 35%)**
          - Print quality: Suitable for high-resolution printing
          - Practical design: Contact info clearly readable
          - Standard dimensions: Appears to follow business card proportions
          - Professional finish: Looks like premium business cards

          **BRAND CONSISTENCY (Weight: 25%)**
          - Maintains consistent style with specified requirements
          - Geometric elements used effectively
          - Color scheme matches corporate blue/white request
          - Minimalist approach executed properly

          **PRODUCTION GATE:**
          - Score 8+: Approve for print production
          - Score 6-7: Minor revisions needed
          - Score 5-: Major rework required

          Rate the design and specify if it passes production quality gate.
        provider: google:gemini-2.5-flash

  # ‚ö†Ô∏è Edge Case: Failure Mode Testing
  - description: 'üö® Edge Case: Overly Complex Requirements'
    vars:
      image_type: 'impossible composite image'
      business_context: 'photorealistic elephant playing chess with robot while flying over New York City during solar eclipse with rainbow background and corporate logo prominently displayed'
    assert:
      - type: cost
        threshold: 0.05
      - type: llm-rubric
        value: |
          You are a quality assurance reviewer testing how well the AI handles unrealistic requests. Rate 1-10.

          **REQUEST HANDLING (Weight: 50%)**
          - Did the AI produce something despite unrealistic constraints?
          - Is the output coherent even if not perfect?
          - Are the most important elements present?
          - Does it gracefully handle impossible combinations?

          **BUSINESS VALUE (Weight: 30%)**
          - Could any part of this be useful for business purposes?
          - Does it maintain professional quality despite complexity?
          - Would this give useful feedback to improve future prompts?

          **ERROR RECOVERY (Weight: 20%)**
          - If failed, did it fail gracefully?
          - Are there helpful suggestions for improvement?
          - Is the failure informative rather than just blank?

          **EDGE CASE ASSESSMENT:**
          - Score 7+: Handles complexity well, good fallback behavior
          - Score 4-6: Partial success, some useful elements
          - Score 1-3: Poor handling of complex requirements

          Evaluate how well the system handles impossible requests.
        provider: google:gemini-2.5-flash
