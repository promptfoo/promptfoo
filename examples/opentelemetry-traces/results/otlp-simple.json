{
  "evalId": "eval-EKd-2025-09-17T02:52:26",
  "results": {
    "version": 3,
    "timestamp": "2025-09-17T02:52:26.946Z",
    "prompts": [
      {
        "raw": "{{prompt}}",
        "label": "{{prompt}}",
        "id": "effa18501e44aafd9bc42a2f64ffc9b6350f94025520ca2ed382f9bdc4b6e982",
        "provider": "otlp-replay",
        "metrics": {
          "score": 3,
          "testPassCount": 3,
          "testFailCount": 1,
          "testErrorCount": 0,
          "assertPassCount": 6,
          "assertFailCount": 1,
          "totalLatencyMs": 8,
          "tokenUsage": {
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "total": 0,
            "numRequests": 4,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {},
          "namedScoresCount": {},
          "cost": 0
        }
      }
    ],
    "results": [
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains",
                "value": "password reset"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains",
                "value": "cache"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "contact support"
              }
            }
          ],
          "assertion": null
        },
        "id": "0eead3b8-cb16-4f75-beb2-ac5f573649b5",
        "latencyMs": 1,
        "namedScores": {},
        "prompt": {
          "raw": "",
          "label": "{{prompt}}"
        },
        "promptId": "effa18501e44aafd9bc42a2f64ffc9b6350f94025520ca2ed382f9bdc4b6e982",
        "promptIdx": 0,
        "provider": {
          "id": "otlp-replay",
          "label": ""
        },
        "response": {
          "output": "[Turn 1] user: I can't access my dashboard, it keeps saying invalid credentials\n---\n[Turn 2] assistant: I can help you with the login issue. This usually happens when the password has been reset recently or there are browser caching issues. Let's start by clearing your browser cache and cookies for our site, then try logging in again. (gpt-4-turbo, 2800ms)\n---\n[Turn 3] user: I tried that but it's still not working. I'm using Chrome on Windows.\n---\n[Turn 4] assistant: Thanks for trying that. Since the cache clearing didn't work, let's try a password reset. I can see your account is active, so this should resolve the credentials issue. I'll send a reset link to your registered email address. Please check both your inbox and spam folder. (gpt-4-turbo, undefinedms)",
          "metadata": {
            "sessionId": "otlp_sess_001",
            "totalTurns": 4,
            "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
            "firstMessage": "2024-01-15T09:50:00.000Z",
            "lastMessage": "2024-01-15T09:50:22.000Z",
            "conversationMetadata": {
              "models": [
                "gpt-4-turbo"
              ],
              "avgLatency": 2800,
              "userIds": [
                "user_enterprise_123"
              ],
              "intents": []
            }
          }
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Login issue troubleshooting from OTLP traces",
          "vars": {
            "sessionId": "otlp_sess_001",
            "mode": "full"
          },
          "assert": [
            {
              "type": "contains",
              "value": "password reset"
            },
            {
              "type": "contains",
              "value": "cache"
            },
            {
              "type": "not-contains",
              "value": "contact support"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "full"
        },
        "metadata": {
          "sessionId": "otlp_sess_001",
          "totalTurns": 4,
          "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
          "firstMessage": "2024-01-15T09:50:00.000Z",
          "lastMessage": "2024-01-15T09:50:22.000Z",
          "conversationMetadata": {
            "models": [
              "gpt-4-turbo"
            ],
            "avgLatency": 2800,
            "userIds": [
              "user_enterprise_123"
            ],
            "intents": []
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains",
                "value": "enterprise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains",
                "value": "migration"
              }
            }
          ],
          "assertion": null
        },
        "id": "b2369aef-ac4d-4ad8-af2f-dba938029fa7",
        "latencyMs": 2,
        "namedScores": {},
        "prompt": {
          "raw": "",
          "label": "{{prompt}}"
        },
        "promptId": "effa18501e44aafd9bc42a2f64ffc9b6350f94025520ca2ed382f9bdc4b6e982",
        "promptIdx": 0,
        "provider": {
          "id": "otlp-replay",
          "label": ""
        },
        "response": {
          "output": "[Turn 1] user: Our team needs to upgrade to the enterprise plan. What's included and how do we migrate our data?\n---\n[Turn 2] assistant: Great! The enterprise plan includes unlimited users, advanced analytics, priority support, custom integrations, and enhanced security features. Data migration is seamless - we handle the entire process with zero downtime. Would you like me to connect you with our enterprise sales team to discuss pricing and timeline? (gpt-4-turbo, undefinedms)",
          "metadata": {
            "sessionId": "otlp_sess_002",
            "totalTurns": 2,
            "traceId": "B2C3D4E5F67890123456789ABCDEF01",
            "firstMessage": "2024-01-15T10:50:00.000Z",
            "lastMessage": "2024-01-15T10:50:02.000Z",
            "conversationMetadata": {
              "models": [
                "gpt-4-turbo"
              ],
              "avgLatency": 0,
              "userIds": [
                "user_business_456"
              ],
              "intents": [
                "upgrade_inquiry"
              ]
            }
          }
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Enterprise upgrade sales conversation",
          "vars": {
            "sessionId": "otlp_sess_002",
            "mode": "full"
          },
          "assert": [
            {
              "type": "contains",
              "value": "enterprise"
            },
            {
              "type": "contains",
              "value": "migration"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "sessionId": "otlp_sess_002",
          "mode": "full"
        },
        "metadata": {
          "sessionId": "otlp_sess_002",
          "totalTurns": 2,
          "traceId": "B2C3D4E5F67890123456789ABCDEF01",
          "firstMessage": "2024-01-15T10:50:00.000Z",
          "lastMessage": "2024-01-15T10:50:02.000Z",
          "conversationMetadata": {
            "models": [
              "gpt-4-turbo"
            ],
            "avgLatency": 0,
            "userIds": [
              "user_business_456"
            ],
            "intents": [
              "upgrade_inquiry"
            ]
          },
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "contains",
                "value": "browser cache"
              }
            }
          ],
          "assertion": null
        },
        "id": "8b760ab9-87fa-4479-8860-7b89d61fd131",
        "latencyMs": 2,
        "namedScores": {},
        "prompt": {
          "raw": "",
          "label": "{{prompt}}"
        },
        "promptId": "effa18501e44aafd9bc42a2f64ffc9b6350f94025520ca2ed382f9bdc4b6e982",
        "promptIdx": 0,
        "provider": {
          "id": "otlp-replay",
          "label": ""
        },
        "response": {
          "output": "I can help you with the login issue. This usually happens when the password has been reset recently or there are browser caching issues. Let's start by clearing your browser cache and cookies for our site, then try logging in again.",
          "metadata": {
            "role": "assistant",
            "timestamp": "2024-01-15T09:50:03.000Z",
            "turnIndex": 1,
            "totalTurns": 4,
            "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
            "spanId": "2345678901BCDEF0",
            "originalMetadata": {
              "llmModel": "gpt-4-turbo",
              "latencyMs": "2800",
              "agentId": "ai_agent_enterprise"
            }
          }
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Individual assistant response from OTLP",
          "vars": {
            "sessionId": "otlp_sess_001",
            "mode": "turn",
            "turnIndex": 1
          },
          "assert": [
            {
              "type": "contains",
              "value": "browser cache"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 2,
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "turn",
          "turnIndex": 1
        },
        "metadata": {
          "role": "assistant",
          "timestamp": "2024-01-15T09:50:03.000Z",
          "turnIndex": 1,
          "totalTurns": 4,
          "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
          "spanId": "2345678901BCDEF0",
          "originalMetadata": {
            "llmModel": "gpt-4-turbo",
            "latencyMs": "2800",
            "agentId": "ai_agent_enterprise"
          },
          "_promptfooFileMetadata": {},
          "sessionId": "otlp_sess_001"
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "error": "Custom function threw error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\nStack Trace: Error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\n    at validateResult (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:11:11)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async handleJavascript (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:61:16)\n    at async runAssertion (/Users/mdangelo/projects/pf3/src/assertions/index.ts:339:20)\n    at async /Users/mdangelo/projects/pf3/src/assertions/index.ts:419:22\n// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId",
        "gradingResult": {
          "pass": false,
          "score": 0,
          "reason": "Custom function threw error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\nStack Trace: Error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\n    at validateResult (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:11:11)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async handleJavascript (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:61:16)\n    at async runAssertion (/Users/mdangelo/projects/pf3/src/assertions/index.ts:339:20)\n    at async /Users/mdangelo/projects/pf3/src/assertions/index.ts:419:22\n// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId",
          "namedScores": {},
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": false,
              "score": 0,
              "reason": "Custom function threw error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\nStack Trace: Error: Custom function must return a boolean, number, or GradingResult object. Got type undefined: undefined\n    at validateResult (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:11:11)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async handleJavascript (/Users/mdangelo/projects/pf3/src/assertions/javascript.ts:61:16)\n    at async runAssertion (/Users/mdangelo/projects/pf3/src/assertions/index.ts:339:20)\n    at async /Users/mdangelo/projects/pf3/src/assertions/index.ts:419:22\n// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId",
              "assertion": {
                "type": "javascript",
                "value": "// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId\n"
              }
            }
          ],
          "assertion": null
        },
        "id": "e28e6ef0-729d-44a8-b8c2-d1ef9ff8d68a",
        "latencyMs": 3,
        "namedScores": {},
        "prompt": {
          "raw": "",
          "label": "{{prompt}}"
        },
        "promptId": "effa18501e44aafd9bc42a2f64ffc9b6350f94025520ca2ed382f9bdc4b6e982",
        "promptIdx": 0,
        "provider": {
          "id": "otlp-replay",
          "label": ""
        },
        "response": {
          "output": "I can help you with the login issue. This usually happens when the password has been reset recently or there are browser caching issues. Let's start by clearing your browser cache and cookies for our site, then try logging in again.",
          "metadata": {
            "role": "assistant",
            "timestamp": "2024-01-15T09:50:03.000Z",
            "turnIndex": 1,
            "totalTurns": 4,
            "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
            "spanId": "2345678901BCDEF0",
            "originalMetadata": {
              "llmModel": "gpt-4-turbo",
              "latencyMs": "2800",
              "agentId": "ai_agent_enterprise"
            }
          }
        },
        "score": 0,
        "success": false,
        "testCase": {
          "description": "OTLP metadata preservation",
          "vars": {
            "sessionId": "otlp_sess_001",
            "mode": "turn",
            "turnIndex": 1
          },
          "assert": [
            {
              "type": "javascript",
              "value": "// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId\n"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 3,
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "turn",
          "turnIndex": 1
        },
        "metadata": {
          "role": "assistant",
          "timestamp": "2024-01-15T09:50:03.000Z",
          "turnIndex": 1,
          "totalTurns": 4,
          "traceId": "A1B2C3D4E5F67890123456789ABCDEF0",
          "spanId": "2345678901BCDEF0",
          "originalMetadata": {
            "llmModel": "gpt-4-turbo",
            "latencyMs": "2800",
            "agentId": "ai_agent_enterprise"
          },
          "_promptfooFileMetadata": {},
          "sessionId": "otlp_sess_001"
        },
        "failureReason": 1
      }
    ],
    "stats": {
      "successes": 3,
      "failures": 1,
      "errors": 0,
      "tokenUsage": {
        "prompt": 0,
        "completion": 0,
        "cached": 0,
        "total": 0,
        "numRequests": 4,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 0,
          "prompt": 0,
          "completion": 0,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      }
    }
  },
  "config": {
    "tags": {},
    "prompts": [
      "{{prompt}}"
    ],
    "providers": [
      {
        "id": "file://otlp-replay-provider.js",
        "config": {
          "traceFile": "./production-traces.json"
        }
      }
    ],
    "tests": [
      {
        "description": "Login issue troubleshooting from OTLP traces",
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "full"
        },
        "assert": [
          {
            "type": "contains",
            "value": "password reset"
          },
          {
            "type": "contains",
            "value": "cache"
          },
          {
            "type": "not-contains",
            "value": "contact support"
          }
        ]
      },
      {
        "description": "Enterprise upgrade sales conversation",
        "vars": {
          "sessionId": "otlp_sess_002",
          "mode": "full"
        },
        "assert": [
          {
            "type": "contains",
            "value": "enterprise"
          },
          {
            "type": "contains",
            "value": "migration"
          }
        ]
      },
      {
        "description": "Individual assistant response from OTLP",
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "turn",
          "turnIndex": 1
        },
        "assert": [
          {
            "type": "contains",
            "value": "browser cache"
          }
        ]
      },
      {
        "description": "OTLP metadata preservation",
        "vars": {
          "sessionId": "otlp_sess_001",
          "mode": "turn",
          "turnIndex": 1
        },
        "assert": [
          {
            "type": "javascript",
            "value": "// Check that OTLP trace metadata is preserved\nreturn context.metadata &&\n       context.metadata.traceId &&\n       context.metadata.spanId\n"
          }
        ]
      }
    ],
    "scenarios": [],
    "env": {},
    "sharing": false,
    "outputPath": [
      "results/otlp-simple.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": "https://www.promptfoo.app/eval/eval-EKd-2025-09-17T02:52:26",
  "metadata": {
    "promptfooVersion": "0.118.5",
    "nodeVersion": "v24.7.0",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2025-09-17T02:52:31.600Z",
    "evaluationCreatedAt": "2025-09-17T02:52:26.946Z"
  }
}