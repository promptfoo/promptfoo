# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json

description: 'Basic OpenAI Agents integration example'

providers:
  - id: openai:agents:weather-agent
    label: 'Weather Agent'
    config:
      # Agent definition from external file
      agent: file://./agents/weather-agent.ts

      # Tools from external file
      tools: file://./tools/weather-tools.ts

      # Maximum agent turns
      maxTurns: 10

      # Execute tools for real (not mocked)
      executeTools: real

      # Enable tracing (optional)
      tracing: true

      # OpenAI API configuration
      apiKey: ${OPENAI_API_KEY}

prompts:
  - '{{query}}'

tests:
  - description: 'Query weather for Tokyo'
    vars:
      query: "What's the weather like in Tokyo?"
    metadata:
      tracingEnabled: true
      testCaseId: 'tokyo-weather'
    assert:
      - type: contains
        value: 'Tokyo'
      - type: contains
        value: '20Â°C'

  - description: 'Query weather for multiple cities'
    vars:
      query: 'Can you tell me the weather in Paris and London?'
    metadata:
      tracingEnabled: true
      testCaseId: 'multi-city-weather'
    assert:
      - type: contains
        value: 'Paris'
      - type: contains
        value: 'London'

  - description: 'Simple greeting without tool use'
    vars:
      query: 'Hello! How are you?'
    metadata:
      tracingEnabled: true
      testCaseId: 'simple-greeting'

# Tracing configuration
tracing:
  enabled: true
  otlp:
    http:
      enabled: true
      port: 4318
      acceptFormats: ['json']
