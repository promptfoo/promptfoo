# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: 'Bedrock Converse API - Comprehensive Test Suite'

# ============================================================================
# This example demonstrates all Converse API capabilities across model families:
# - Text generation (all models)
# - System prompts
# - Multi-turn conversations
# - Tool/function calling
# - Extended thinking (Claude)
# - Performance configuration
# ============================================================================

prompts:
  # Simple text prompt
  - 'What is the capital of {{country}}?'

providers:
  # ============================================================================
  # Claude Models (Anthropic) - Full featured
  # ============================================================================

  # Claude Sonnet 4.5 with Extended Thinking
  - id: bedrock:converse:us.anthropic.claude-sonnet-4-5-20250929-v1:0
    label: Claude Sonnet 4.5 (Thinking)
    config:
      region: us-west-2
      maxTokens: 16000
      temperature: 0.7
      thinking:
        type: enabled
        budget_tokens: 10000
      showThinking: true

  # Claude 3.5 Sonnet v2 (via inference profile)
  - id: bedrock:converse:us.anthropic.claude-3-5-sonnet-20241022-v2:0
    label: Claude 3.5 Sonnet v2
    config:
      region: us-east-1
      maxTokens: 4096
      temperature: 0.7

  # Claude 3.5 Haiku (fast, cheap)
  - id: bedrock:converse:us.anthropic.claude-3-5-haiku-20241022-v1:0
    label: Claude 3.5 Haiku
    config:
      region: us-east-1
      maxTokens: 2048
      temperature: 0.5

  # ============================================================================
  # Amazon Nova Models
  # ============================================================================

  # Nova Pro (most capable)
  - id: bedrock:converse:amazon.nova-pro-v1:0
    label: Nova Pro
    config:
      region: us-east-1
      maxTokens: 4096
      temperature: 0.7

  # Nova Lite (balanced)
  - id: bedrock:converse:amazon.nova-lite-v1:0
    label: Nova Lite
    config:
      region: us-east-1
      maxTokens: 2048

  # Nova Micro (fastest)
  - id: bedrock:converse:amazon.nova-micro-v1:0
    label: Nova Micro
    config:
      region: us-east-1
      maxTokens: 1024

  # ============================================================================
  # Meta Llama Models
  # ============================================================================

  # Llama 3.3 70B (latest Llama 3.x)
  - id: bedrock:converse:us.meta.llama3-3-70b-instruct-v1:0
    label: Llama 3.3 70B
    config:
      region: us-west-2
      maxTokens: 4096
      temperature: 0.7

  # Llama 3.2 3B (lightweight)
  - id: bedrock:converse:us.meta.llama3-2-3b-instruct-v1:0
    label: Llama 3.2 3B
    config:
      region: us-west-2
      maxTokens: 2048

  # ============================================================================
  # Mistral Models
  # ============================================================================

  # Mistral Small (efficient)
  - id: bedrock:converse:mistral.mistral-small-2402-v1:0
    label: Mistral Small
    config:
      region: us-east-1
      maxTokens: 2048
      temperature: 0.7

  # ============================================================================
  # AI21 Jamba Models
  # ============================================================================

  # Jamba 1.5 Mini
  - id: bedrock:converse:ai21.jamba-1-5-mini-v1:0
    label: AI21 Jamba Mini
    config:
      region: us-east-1
      maxTokens: 2048

  # ============================================================================
  # Cohere Command R Models
  # ============================================================================

  # Command R (RAG optimized)
  - id: bedrock:converse:cohere.command-r-v1:0
    label: Cohere Command R
    config:
      region: us-east-1
      maxTokens: 2048
      temperature: 0.7

tests:
  - vars:
      country: France
    assert:
      - type: contains
        value: Paris
  - vars:
      country: Japan
    assert:
      - type: contains
        value: Tokyo
  - vars:
      country: Australia
    assert:
      - type: contains-any
        value:
          - Canberra
          - Sydney
          - Melbourne
