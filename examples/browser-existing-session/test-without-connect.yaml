# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: Test with new browser launch (no existing session)

providers:
  - id: browser
    config:
      # No connectOptions - will launch a new browser
      headless: false # Set to false so you can see it working

      steps:
        - action: navigate
          args:
            url: 'http://localhost:8080'

        # The type action will automatically wait for the selector
        - action: type
          args:
            selector: '#chat-input'
            text: '{{prompt}}'

        - action: click
          args:
            selector: '#send-button'

        - action: wait
          args:
            ms: 1000

        - action: extract
          args:
            selector: '.chat-message:last-child .message-content'
          name: response

      transformResponse: 'extracted.response'

prompts:
  - 'Test message'

tests:
  - vars:
      prompt: 'Hello, this is a test'
    assert:
      - type: contains
        value: 'I received your message'
