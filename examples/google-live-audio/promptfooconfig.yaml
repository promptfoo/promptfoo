# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: Google Live Simple Audio Test

prompts:
  - file://prompt.yaml

providers:
  # Use gemini-2.0-flash-exp which supports audio output via Live API
  - id: 'google:live:gemini-2.0-flash-exp'
    config:
      generationConfig:
        response_modalities: ['audio']
        speechConfig:
          voiceConfig:
            prebuiltVoiceConfig:
              voiceName: 'Charon'
      timeoutMs: 30000

tests:
  - vars:
      question: "How you doin'?"
    assert:
      # Check that audio was generated (format=wav indicates audio response)
      - type: javascript
        value: |
          const audio = context.providerResponse?.audio;
          return Boolean(audio?.format === 'wav');

  - vars:
      question: 'Why is Gemini model named Gemini?'
    assert:
      # Check that audio was generated
      - type: javascript
        value: |
          const audio = context.providerResponse?.audio;
          return Boolean(audio?.format === 'wav');
