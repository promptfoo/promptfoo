# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json
description: PydanticAI weather agent evaluation

prompts:
  - '{{query}}'

providers:
  - id: file://provider.py
    label: PydanticAI Weather Agent

tests:
  - description: 'Basic weather query'
    vars:
      query: "What's the weather like in London?"
    assert:
      - type: javascript
        value: "output.location && output.location.toLowerCase().includes('london')"
      - type: javascript
        value: "output.temperature && output.temperature !== 'N/A'"

  - description: 'Structured output validation'
    vars:
      query: 'Weather in New York'
    assert:
      - type: javascript
        value: 'output.location && output.temperature && output.description'
      - type: javascript
        value: "typeof output.location === 'string' && typeof output.temperature === 'string'"

  - description: 'Unknown location handling'
    vars:
      query: 'Weather in RandomCity'
    assert:
      - type: javascript
        value: 'output.location && output.temperature && output.description'
      - type: javascript
        value: "output.location.includes('RandomCity')"

outputPath: ./promptfoo_results.json
