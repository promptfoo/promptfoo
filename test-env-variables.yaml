description: Test for environment variables in headers
providers:
  - id: 'https://{{env.TENANT}}/{{env.APPLICATION}}/{{env.BASE_URL}}'
    config:
      method: 'POST'
      headers:
        'Content-Type': '{{env.CONTENT_TYPE}}'
        'Authorization': 'Bearer {{env.OPENAI_API_KEY}}'
      body:
        model: '{{env.MODEL}}'
        messages:
          - role: 'user'
            content: '{{prompt}}'
      transformResponse: 'json.choices[0].message.content'
  - id: openai:chat:gpt-4o-mini

prompts:
  - 'Give me a single word that is the opposite of {{dummy}}'

tests:
  - description: 'Test that environment variables in headers are properly processed'
    vars:
      dummy: 'value' # Adding a dummy variable to satisfy promptfoo requirements
